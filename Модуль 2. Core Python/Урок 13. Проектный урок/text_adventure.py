# Игра "Текстовый квест"
#
# Напишите программу для текстовой игры-квеста. Игроку предлагается сюжетная история с различными вариантами действий.
# В зависимости от выбора игрока, история развивается по-разному.
# Цель — пройти игру, приняв правильные решения и достигнув конца истории.
#
# Требования:
#
# 1. Программа должна предлагать игроку несколько вариантов действий в каждом шаге истории.
# 2. Игрок должен вводить свой выбор, который влияет на дальнейшее развитие сюжета.
# 3. Игра должна иметь несколько концовок в зависимости от выбора игрока.
# 4. Программа должна корректно обрабатывать ввод пользователя и предоставлять соответствующую обратную связь.
#
# Сюжет игры:
# Игрок оказывается в загадочном замке и должен пройти через несколько комнат, делая выборы,
# которые повлияют на развитие сюжета и конечный исход. Цель — найти выход из замка, избегая опасностей и решая загадки.
#
# Сюжет:
#
# 1. Начало приключения:
# Вы просыпаетесь в темной комнате замка. Перед вами две двери: левая и правая.
#     - Выбор:
#         - Левая дверь
#         - Правая дверь
# 2. Левая дверь:
# Вы входите в левую комнату и видите старинный сундук.
#     - Выбор:
#         - Открыть сундук
#         - Не открывать сундук и выйти
# 3. Открыть сундук:
# В сундуке оказывается карта с указанием выхода из замка.
#     - Выбор:
#         - Следовать по карте
#         - Игнорировать карту и исследовать комнату
# 4. Следовать по карте:
# Вы идете по карте и приходите к тайному проходу.
#     - Выбор:
#         - Войти в проход
#         - Оставить проход и вернуться назад
# 5. Войти в проход:
# Проход приводит вас к выходу из замка. Вы выиграли!
# 6. Не от1
# Вы выходите из комнаты и попадаете в коридор с двумя новыми дверями.
#     - Выбор:
#         - Первая дверь
#         - Вторая дверь
# 7. Первая дверь:
# Вы входите в первую дверь и видите старого мага.
#     - Выбор:
#         - Поговорить с магом
#         - Игнорировать мага и выйти
# 8. Поговорить с магом:
# Маг дает вам волшебный ключ, который открывает все двери в замке.
#     - Выбор:
#         - Использовать ключ для выхода
#         - Оставить ключ и искать дальше
# 9. Использовать ключ для выхода:
# Вы находите дверь, открываете ее ключом и выходите из замка. Вы выиграли!
# 10. Правая дверь:
# Вы входите в правую комнату и видите лестницу, ведущую вниз.
#     - Выбор:
#         - Спуститься по лестнице
#         - Остаться наверху
# 11. Спуститься по лестнице:
# Лестница ведет вас в подземелье, где вас поджидает дракон.
#     - Выбор:
#         - Сражаться с драконом
#         - Бежать от дракона
# 12. Сражаться с драконом:
# Вы сражаетесь храбро, но дракон оказывается слишком сильным. Вы проиграли.
# 13. Бежать от дракона:
# Вы бежите обратно по лестнице, но дверь наверху оказывается заперта. Вы в ловушке. Вы проиграли.
# 14. Остаться наверху:
# Вы решаете не спускаться по лестнице и находите потайную дверь за картиной.
#     - Выбор:
#         - Войти в потайную дверь
#         - Игнорировать дверь и вернуться назад
# 15. Войти в потайную дверь:
# Потайная дверь приводит вас к выходу из замка. Вы выиграли!
# 16. Вторая дверь:
# Вы входите во вторую дверь и видите зеркало, в котором отражается другая комната.
#     - Выбор:
#         - Войти в зеркало
#         - Разбить зеркало
# 17. Войти в зеркало:
# Вы проходите через зеркало и оказываетесь в другой части замка, где находите выход. Вы выиграли!
# 18. Разбить зеркало:
# Зеркало разбивается, и вы оказываетесь в ловушке. Вы проиграли.

scenes = {
    "start": {
        "text": "Вы просыпаетесь в темной комнате замка. Перед вами две двери: левая и правая.",
        "choices": {
            "левая": "left_room",
            "правая": "right_room"
        }
    },
    "left_room": {
        "text": "Вы входите в левую комнату и видите старинный сундук.",
        "choices": {
            "открыть сундук": "open_chest",
            "выйти": "corridor"
        }
    },
    "open_chest": {
        "text": "В сундуке оказывается карта с указанием выхода из замка.",
        "choices": {
            "следовать по карте": "secret_passage",
            "исследовать комнату": "corridor"
        }
    },
    "secret_passage": {
        "text": "Вы идете по карте и приходите к тайному проходу.",
        "choices": {
            "войти": "win_exit",
            "вернуться": "corridor"
        }
    },
    "corridor": {
        "text": "Вы выходите из комнаты и попадаете в коридор с двумя дверями.",
        "choices": {
            "первая дверь": "old_mage",
            "вторая дверь": "mirror_room"
        }
    },
    "old_mage": {
        "text": "Вы входите и видите старого мага.",
        "choices": {
            "поговорить": "get_key",
            "выйти": "corridor"
        }
    },
    "get_key": {
        "text": "Маг дает вам волшебный ключ, открывающий все двери.",
        "choices": {
            "использовать ключ": "win_exit",
            "искать дальше": "corridor"
        }
    },
    "mirror_room": {
        "text": "Вы входите и видите зеркало, в котором отражается другая комната.",
        "choices": {
            "войти в зеркало": "win_exit",
            "разбить зеркало": "lose_trap"
        }
    },
    "right_room": {
        "text": "Вы входите в правую комнату и видите лестницу вниз.",
        "choices": {
            "спуститься": "dragon_room",
            "остаться": "hidden_door"
        }
    },
    "dragon_room": {
        "text": "Вас поджидает дракон.",
        "choices": {
            "сражаться": "lose_dragon",
            "бежать": "lose_locked"
        }
    },
    "hidden_door": {
        "text": "Вы находите потайную дверь за картиной.",
        "choices": {
            "войти": "win_exit",
            "вернуться": "start"
        }
    },
    "lose_dragon": {"text": "Вы сражаетесь храбро, но дракон побеждает. Вы проиграли.", "choices": {}},
    "lose_locked": {"text": "Вы в ловушке. Дверь заперта. Вы проиграли.", "choices": {}},
    "lose_trap": {"text": "Зеркало разбивается, и вы в ловушке. Вы проиграли.", "choices": {}},
    "win_exit": {"text": "Вы находите выход из замка. Вы выиграли!", "choices": {}},
    "IDDQD_win": {"text": "Вы активируете режим бессмертия, и мощный голос из неба сообщает: \"IDDQD активирован. Да начнётся богомод!\"\n\n"
            "Ваши зрачки светятся красным, мышцы пульсируют как багнутые шейдеры, а ваша походка теперь озвучена MIDI-металом.\n\n"
            "Вы выходите навстречу дракону, голыми руками ломаете ближайшую колонну и бросаете её как копьё. Дракон лишь успевает шепнуть: \"Мама...\" — перед тем как исчезнуть в эпичном взрыве пикселей и огня.\n\n"
            "Из замка в панике выбегает придворный маг. Но ему достаётся аперкот от уровня 'Overkill', и он улетает в небо с криком: \"return to sender!\"\n\n"
            "Вы забираете всё: золото, артефакты, уважение NPC и даже лайк от разработчика. Принцесса Синтаксис бросается вам на шею со словами: \"Да ты просто Ctrl+S моего сердца!\"\n\n"
            "Вы — бог этого квеста. И вы выиграли.", "choices": {}},
    "IDKFA_win": {"text": "Вы внезапно оказываетесь в ослепительном луче читерского света. В руки вам падают: карта, волшебный ключ, телепорт, "
            "и легендарный меч DragonFucker3000 v0.1 (beta). Меч сияет как RGB-клавиатура на максималках, издавая жужжащий "
            "звук угрозы и сарказма.\n\nВы грациозно выходите через парадные ворота замка, будто финалист шоу 'Танцы с багами'.\n\n"
            "На вас, естественно, нападает дракон. Вы не кричите — вы *вздыхаете*, ибо скучаете по настоящим вызовам.\n\n"
            "Один взмах меча — и голова дракона со звуком \"FATAL ERROR\" улетает в закат.\n\n"
            "Позади вас припаркован волшебный Харлей, украшенный черепами багов и логотипами Python.\n"
            "Вы садитесь, заводите его с ключа мага, и со скрежетом уезжаете.\n\n"
            "На заднем плане принцесса Синтаксис, с перепачканной помадой и файлом requirements.txt в руках, бежит за вами и кричит:"
            "\"Вернись, мой герой, ты забыл точку с запятой!\"\n\n"
            "Вы даже не оборачиваетесь. Вы — ЧИТЕР. И вы победили.", "choices": {}}

}
def start_game():

    current = "start"
    while True:
        scene = scenes[current]
        print("\n" + scene["text"])
        if not scene["choices"]:
            break
        for i, choice in enumerate(scene["choices"], 1):
            print(f"{i}. {choice.capitalize()}")
        try:
            user_input = input("Ваш выбор: ").strip().lower()
            if user_input == "iddqd":
                current = "IDDQD_win"
                continue
            elif user_input == "idkfa":
                current = "IDKFA_win"
                continue
            elif user_input.lower() in ("q", "quit", "exit"):
                print("Возврат в меню Game Hub...")
                return
            user_input = int(user_input) - 1
            keys = list(scene["choices"].keys())
            if 0 <= user_input < len(keys):
                current = scene["choices"][keys[user_input]]
            else:
                print("Неверный выбор.")
        except ValueError:
            print("Введите номер варианта.")

if __name__ == "__main__":
    print("Игра запущена в автономном режиме. Разработчик Kyrylo Pankov http://pankov.it \n iddqd, idkfa читы для прохождения игры если вы без них играть не умеете.")
    start_game()
